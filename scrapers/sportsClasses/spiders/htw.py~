# -*- coding: utf-8 -*-
import scrapy
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors import LinkExtractor
from sportsClasses.items import SportsClassItem


class HtwSpider(scrapy.Spider):
    name = "htw"
    allowed_domains = ["sport.htw-berlin.de"]
    start_urls = (
        'http://sport.htw-berlin.de/angebote/aktueller_zeitraum/index.html',
        'http://sport.htw-berlin.de/angebote/aktueller_zeitraum/_-_10er_Karte_Ballsport_Fitness.html'
    )

    rules = [Rule(LinkExtractor(allow=['_.+.html']), callback='parse')]


    def parse(self, response):
        sportsClass = SportsClassItem()
        sportsClass['url'] = response.url
        sportsClass['name'] = response.xpath("//div[@class='bs_head']/text()").extract()
        sportsClass['description'] = response.xpath("//div[@class='bs_kurzbeschreibung']/text()").extract()
        #torrent['size'] = response.xpath("//div[@id='info-left']/p[2]/text()[2]").extract()
        return sportsClass
